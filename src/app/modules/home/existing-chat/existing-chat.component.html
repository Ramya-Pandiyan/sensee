<div class="dashboard-container">
  <div class="chat-area" [class.empty]="chatMessages.length === 0">

    <!-- Header (always visible) -->
    <div class="chat-header">
      <h1 class="app-title">Sense</h1>
      <p class="app-subtitle">AI-Powered Underwriting, Claims and Reinsurance Assistant</p>
    </div>

    <!-- Messages only if > 0 -->
    <div class="chat-messages" #chatMessage *ngIf="chatMessages.length > 0">
      <div *ngFor="let message of chatMessages; let i = index"
           class="message-wrapper"
           [class.user-message]="message.type === 'user'"
           [class.bot-message]="message.type === 'bot'"
           [style.animation-delay]="i * 0.3 + 's'">
        <div class="message-bubble">
          <div class="message-content">{{ message.content }}</div>
          <div class="message-time">{{ message.timestamp | date:'short' }}</div>
          <div class="message-action" *ngIf="message.hasAction">
            <button class="btn btn-primary action-btn"
                    (click)="onActionClick(message.actionType || '')">
              {{ message.actionText }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading -->
    <div class="loading-messages" *ngIf="isLoading">
      <div class="loading-bubble">
        <div class="typing-indicator">
          <span></span><span></span><span></span>
        </div>
      </div>
    </div>

    <!-- Input -->
    <app-chat-interface 
      (messageSubmitted)="onSendMessage($event)"
      [disabled]="isLoading">
    </app-chat-interface>

  </div>
</div>